<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporate Dashboard ‚Äî Motion Arena</title>
    <link rel="stylesheet" href="/css/common.css">
    <style>
        body {
            background: #080b12;
        }

        .dash-container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 24px;
        }

        .dash-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
        }

        .dash-header h1 {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8rem;
            color: #64b5f6;
            letter-spacing: 2px;
        }

        .dash-header .company-badge {
            padding: 6px 16px;
            background: rgba(100, 181, 246, 0.1);
            border: 1px solid rgba(100, 181, 246, 0.2);
            border-radius: 20px;
            font-size: 0.75rem;
            color: #64b5f6;
        }

        /* KPI Cards */
        .kpi-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: rgba(100, 181, 246, 0.04);
            border: 1px solid rgba(100, 181, 246, 0.12);
            border-radius: 14px;
            padding: 20px;
        }

        .kpi-label {
            font-size: 0.7rem;
            color: rgba(100, 181, 246, 0.5);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .kpi-value {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.6rem;
            color: white;
        }

        .kpi-trend {
            font-size: 0.7rem;
            margin-top: 6px;
        }

        .kpi-trend.positive {
            color: #00cec9;
        }

        .kpi-trend.negative {
            color: #e17055;
        }

        .kpi-trend.neutral {
            color: #fdcb6e;
        }

        /* Main Grid */
        .dash-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .dash-panel {
            background: rgba(100, 181, 246, 0.04);
            border: 1px solid rgba(100, 181, 246, 0.12);
            border-radius: 14px;
            padding: 24px;
        }

        .panel-title {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.45rem;
            color: rgba(100, 181, 246, 0.6);
            letter-spacing: 2px;
            margin-bottom: 16px;
        }

        /* Activity Heatmap */
        .heatmap-grid {
            display: grid;
            grid-template-columns: 40px repeat(24, 1fr);
            gap: 2px;
        }

        .heatmap-day-label {
            font-size: 0.6rem;
            color: rgba(100, 181, 246, 0.4);
            display: flex;
            align-items: center;
            padding-right: 8px;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 3px;
            transition: all 0.2s;
            cursor: pointer;
            min-width: 12px;
            min-height: 12px;
        }

        .heatmap-cell:hover {
            transform: scale(1.4);
            z-index: 2;
            position: relative;
        }

        .heatmap-cell.level-0 {
            background: rgba(100, 181, 246, 0.03);
        }

        .heatmap-cell.level-1 {
            background: rgba(100, 181, 246, 0.15);
        }

        .heatmap-cell.level-2 {
            background: rgba(100, 181, 246, 0.3);
        }

        .heatmap-cell.level-3 {
            background: rgba(100, 181, 246, 0.5);
        }

        .heatmap-cell.level-4 {
            background: rgba(100, 181, 246, 0.8);
        }

        .heatmap-hour-labels {
            display: grid;
            grid-template-columns: 40px repeat(24, 1fr);
            gap: 2px;
            margin-top: 4px;
        }

        .heatmap-hour-label {
            font-size: 0.5rem;
            color: rgba(100, 181, 246, 0.3);
            text-align: center;
        }

        /* Health Score */
        .health-score-ring {
            width: 160px;
            height: 160px;
            margin: 0 auto 16px;
            position: relative;
        }

        .health-score-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .health-ring-bg {
            fill: none;
            stroke: rgba(100, 181, 246, 0.08);
            stroke-width: 10;
        }

        .health-ring-fill {
            fill: none;
            stroke: #64b5f6;
            stroke-width: 10;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease;
        }

        .health-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .health-value {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.6rem;
            color: white;
        }

        .health-label {
            font-size: 0.6rem;
            color: rgba(100, 181, 246, 0.5);
            margin-top: 4px;
        }

        /* Burnout Risk */
        .burnout-meter {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            overflow: hidden;
            margin: 16px 0 8px;
            border: 1px solid rgba(100, 181, 246, 0.08);
        }

        .burnout-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
        }

        .burnout-fill.low {
            background: linear-gradient(90deg, #00cec9, #55efc4);
        }

        .burnout-fill.moderate {
            background: linear-gradient(90deg, #fdcb6e, #ffa502);
        }

        .burnout-fill.high {
            background: linear-gradient(90deg, #e17055, #d63031);
        }

        .burnout-label {
            display: flex;
            justify-content: space-between;
            font-size: 0.65rem;
            color: rgba(100, 181, 246, 0.4);
        }

        .burnout-status {
            text-align: center;
            margin-top: 12px;
            padding: 8px 16px;
            border-radius: 8px;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.4rem;
            letter-spacing: 1px;
        }

        .burnout-status.low {
            background: rgba(0, 206, 201, 0.1);
            color: #00cec9;
            border: 1px solid rgba(0, 206, 201, 0.2);
        }

        .burnout-status.moderate {
            background: rgba(253, 203, 110, 0.1);
            color: #fdcb6e;
            border: 1px solid rgba(253, 203, 110, 0.2);
        }

        .burnout-status.high {
            background: rgba(225, 112, 85, 0.1);
            color: #e17055;
            border: 1px solid rgba(225, 112, 85, 0.2);
        }

        /* Activity Summary */
        .activity-list {
            list-style: none;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(100, 181, 246, 0.06);
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .activity-item:last-child {
            border: none;
        }

        .activity-icon {
            font-size: 1.2rem;
        }

        .activity-count {
            margin-left: auto;
            font-family: monospace;
            color: #64b5f6;
        }

        .footer-note {
            text-align: center;
            margin-top: 24px;
            font-size: 0.7rem;
            color: rgba(100, 181, 246, 0.25);
        }

        @media (max-width: 768px) {
            .kpi-row {
                grid-template-columns: repeat(2, 1fr);
            }

            .dash-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="dash-container">
        <div class="dash-header">
            <h1>üíº CORPORATE WELLNESS</h1>
            <div class="company-badge">üìä B2B Dashboard Demo</div>
        </div>

        <!-- KPI Cards -->
        <div class="kpi-row">
            <div class="kpi-card">
                <div class="kpi-label">üë• Team Members</div>
                <div class="kpi-value" id="kpi-members">12</div>
                <div class="kpi-trend positive" id="kpi-members-trend">‚Üë Active this week</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">üèãÔ∏è Total Sessions</div>
                <div class="kpi-value" id="kpi-sessions">0</div>
                <div class="kpi-trend neutral">This week</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">‚è±Ô∏è Avg Focus Time</div>
                <div class="kpi-value" id="kpi-focus">0m</div>
                <div class="kpi-trend neutral">Per session</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">üò§ Avg Stress</div>
                <div class="kpi-value" id="kpi-stress">--</div>
                <div class="kpi-trend neutral" id="kpi-stress-trend">Measuring...</div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="dash-grid">
            <!-- Activity Heatmap -->
            <div class="dash-panel">
                <div class="panel-title">WEEKLY ACTIVITY HEATMAP</div>
                <div class="heatmap-grid" id="heatmap-grid"></div>
                <div class="heatmap-hour-labels" id="heatmap-hours"></div>
            </div>

            <!-- Health Score -->
            <div class="dash-panel">
                <div class="panel-title">TEAM HEALTH SCORE</div>
                <div class="health-score-ring">
                    <svg viewBox="0 0 120 120">
                        <circle class="health-ring-bg" cx="60" cy="60" r="48" />
                        <circle class="health-ring-fill" id="health-ring" cx="60" cy="60" r="48"
                            stroke-dasharray="301.59" stroke-dashoffset="301.59" />
                    </svg>
                    <div class="health-center">
                        <div class="health-value" id="health-value">--</div>
                        <div class="health-label">/ 100</div>
                    </div>
                </div>
                <div style="text-align:center; font-size:0.75rem; color:rgba(100,181,246,0.4);">
                    Anonymous aggregate score based on activity, stress, and engagement
                </div>
            </div>
        </div>

        <!-- Bottom Row -->
        <div class="dash-grid">
            <!-- Burnout Risk -->
            <div class="dash-panel">
                <div class="panel-title">BURNOUT RISK INDICATOR</div>
                <div class="burnout-meter">
                    <div class="burnout-fill low" id="burnout-fill" style="width: 25%"></div>
                </div>
                <div class="burnout-label">
                    <span>Low</span><span>Moderate</span><span>High</span>
                </div>
                <div class="burnout-status low" id="burnout-status">LOW RISK ‚Äî TEAM IS HEALTHY</div>
            </div>

            <!-- Activity Summary -->
            <div class="dash-panel">
                <div class="panel-title">EXERCISE BREAKDOWN</div>
                <ul class="activity-list">
                    <li class="activity-item">
                        <span class="activity-icon">üéì</span>
                        <span>Focus Sessions</span>
                        <span class="activity-count" id="act-focus">0</span>
                    </li>
                    <li class="activity-item">
                        <span class="activity-icon">üí™</span>
                        <span>Plank Challenges</span>
                        <span class="activity-count" id="act-plank">0</span>
                    </li>
                    <li class="activity-item">
                        <span class="activity-icon">ü´Å</span>
                        <span>Breath Exercises</span>
                        <span class="activity-count" id="act-breath">0</span>
                    </li>
                    <li class="activity-item">
                        <span class="activity-icon">üß†</span>
                        <span>Stress Resets</span>
                        <span class="activity-count" id="act-stress">0</span>
                    </li>
                    <li class="activity-item">
                        <span class="activity-icon">üåç</span>
                        <span>Adventure Quests</span>
                        <span class="activity-count" id="act-adventure">0</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="footer-note">
            All data is anonymous and aggregated. Individual identities are never stored or displayed.<br>
            Powered by Motion Arena ‚Äî EdTech √ó HealthTech √ó B2B SaaS
        </div>
    </div>

    <script>
        // Generate heatmap
        function buildHeatmap() {
            const grid = document.getElementById('heatmap-grid');
            const hoursRow = document.getElementById('heatmap-hours');
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

            // Load stored activity data
            const storedActivity = JSON.parse(localStorage.getItem('motion-arena-activity') || '{}');

            days.forEach(day => {
                // Day label
                const label = document.createElement('div');
                label.className = 'heatmap-day-label';
                label.textContent = day;
                grid.appendChild(label);

                // 24 hour cells
                for (let h = 0; h < 24; h++) {
                    const cell = document.createElement('div');
                    const key = `${day}-${h}`;
                    const count = storedActivity[key] || 0;
                    const level = count === 0 ? 0 : count <= 1 ? 1 : count <= 3 ? 2 : count <= 6 ? 3 : 4;
                    cell.className = `heatmap-cell level-${level}`;
                    cell.title = `${day} ${h}:00 ‚Äî ${count} activities`;
                    grid.appendChild(cell);
                }
            });

            // Hour labels
            const spacer = document.createElement('div');
            hoursRow.appendChild(spacer);
            for (let h = 0; h < 24; h++) {
                const hl = document.createElement('div');
                hl.className = 'heatmap-hour-label';
                hl.textContent = h % 6 === 0 ? `${h}h` : '';
                hoursRow.appendChild(hl);
            }
        }

        // Load stress data and compute metrics
        function computeMetrics() {
            const stressData = JSON.parse(localStorage.getItem('motion-arena-stress') || '[]');
            const activityData = JSON.parse(localStorage.getItem('motion-arena-sessions') || '[]');

            // Sessions count
            document.getElementById('kpi-sessions').textContent = activityData.length || Math.floor(Math.random() * 8 + 3);

            // Average stress
            if (stressData.length > 0) {
                const avgStress = Math.round(stressData.reduce((a, b) => a + b.stress, 0) / stressData.length);
                document.getElementById('kpi-stress').textContent = avgStress;

                const trend = document.getElementById('kpi-stress-trend');
                if (avgStress < 30) {
                    trend.textContent = '‚Üì Low stress';
                    trend.className = 'kpi-trend positive';
                } else if (avgStress < 60) {
                    trend.textContent = '‚Üí Moderate';
                    trend.className = 'kpi-trend neutral';
                } else {
                    trend.textContent = '‚Üë High stress';
                    trend.className = 'kpi-trend negative';
                }
            }

            // Health Score (composite)
            const healthScore = computeHealthScore(stressData, activityData);
            document.getElementById('health-value').textContent = healthScore;
            const circumference = 2 * Math.PI * 48;
            const offset = circumference * (1 - healthScore / 100);
            document.getElementById('health-ring').style.strokeDashoffset = offset;

            // Burnout risk
            const burnoutRisk = computeBurnoutRisk(stressData, activityData);
            const burnoutFill = document.getElementById('burnout-fill');
            burnoutFill.style.width = burnoutRisk + '%';
            const burnoutStatus = document.getElementById('burnout-status');
            if (burnoutRisk < 35) {
                burnoutFill.className = 'burnout-fill low';
                burnoutStatus.className = 'burnout-status low';
                burnoutStatus.textContent = 'LOW RISK ‚Äî TEAM IS HEALTHY';
            } else if (burnoutRisk < 65) {
                burnoutFill.className = 'burnout-fill moderate';
                burnoutStatus.className = 'burnout-status moderate';
                burnoutStatus.textContent = 'MODERATE ‚Äî MONITOR CLOSELY';
            } else {
                burnoutFill.className = 'burnout-fill high';
                burnoutStatus.className = 'burnout-status high';
                burnoutStatus.textContent = 'HIGH RISK ‚Äî INTERVENTION NEEDED';
            }
        }

        function computeHealthScore(stressData, activityData) {
            // Higher activity + lower stress = better health
            let score = 70; // baseline

            // Activity bonus
            const sessionsThisWeek = activityData.filter(a =>
                a.time > Date.now() - 7 * 24 * 60 * 60 * 1000
            ).length;
            score += Math.min(15, sessionsThisWeek * 3);

            // Stress penalty
            if (stressData.length > 0) {
                const recentStress = stressData.slice(-20);
                const avgStress = recentStress.reduce((a, b) => a + b.stress, 0) / recentStress.length;
                score -= Math.round(avgStress * 0.3);
            }

            return Math.max(0, Math.min(100, score));
        }

        function computeBurnoutRisk(stressData, activityData) {
            let risk = 20; // baseline

            // High sustained stress increases risk
            if (stressData.length > 0) {
                const recentStress = stressData.slice(-30);
                const avgStress = recentStress.reduce((a, b) => a + b.stress, 0) / recentStress.length;
                risk += avgStress * 0.5;
            }

            // Low activity increases risk
            const sessionsThisWeek = activityData.length;
            if (sessionsThisWeek < 2) risk += 15;

            return Math.max(0, Math.min(100, Math.round(risk)));
        }

        // Seed demo data if empty
        function seedDemoData() {
            if (!localStorage.getItem('motion-arena-activity')) {
                const activity = {};
                const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                days.forEach(d => {
                    for (let h = 8; h < 18; h++) {
                        activity[`${d}-${h}`] = Math.floor(Math.random() * 5);
                    }
                });
                localStorage.setItem('motion-arena-activity', JSON.stringify(activity));
            }
        }

        seedDemoData();
        buildHeatmap();
        computeMetrics();

        // Auto-refresh every 10 seconds
        setInterval(computeMetrics, 10000);
    </script>
</body>

</html>