<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CPR Controller | Motion Arena</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="controller.css">
</head>

<body>
    <!-- ‚îÄ‚îÄ Loading Screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="screen active" id="loadingScreen">
        <div class="screen-content">
            <div class="app-logo">‚ù§Ô∏è</div>
            <h1 class="app-title">CPR TRAINER</h1>
            <p class="loader-text">Connecting...</p>
            <p class="loader-sub">Initializing sensors</p>
            <div class="loader-bar">
                <div class="loader-bar-fill"></div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Calibration Screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="screen" id="calibScreen">
        <div class="screen-content">
            <div class="calib-icon">üéØ</div>
            <h1 class="calib-title">Calibration</h1>
            <p class="calib-desc">Place phone face-down on a pillow or cushion.<br>Perform <b>3 strong compressions</b>
                to calibrate.</p>

            <div class="calib-progress-wrap">
                <div class="calib-progress-bar">
                    <div class="calib-progress-fill" id="calibProgress"></div>
                </div>
                <p class="calib-count" id="calibCount">0/3</p>
            </div>

            <p class="calib-status" id="calibStatus">Push down firmly 3 times...</p>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Setup Screen (Difficulty + Ready) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="screen" id="setupScreen">
        <div class="screen-content">
            <h1 class="setup-title">üè• Ready to Train?</h1>
            <p class="setup-sub">Calibration complete! Select difficulty:</p>

            <div class="diff-group">
                <button class="diff-btn selected" data-diff="beginner">
                    <span class="diff-icon">üü¢</span>
                    <span class="diff-label">Beginner</span>
                    <span class="diff-desc">Guided rhythm ‚Ä¢ Depth guide ‚Ä¢ Forgiving</span>
                </button>
                <button class="diff-btn" data-diff="intermediate">
                    <span class="diff-icon">üü°</span>
                    <span class="diff-label">Intermediate</span>
                    <span class="diff-desc">No rhythm hint ‚Ä¢ Realistic physics</span>
                </button>
                <button class="diff-btn" data-diff="advanced">
                    <span class="diff-icon">üî¥</span>
                    <span class="diff-label">Advanced</span>
                    <span class="diff-desc">Fatigue sim ‚Ä¢ Strict scoring</span>
                </button>
            </div>

            <button class="ready-btn" id="readyBtn">üöÄ I'M READY ‚Äî START!</button>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Game Screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="screen" id="gameScreen">
        <div class="game-hud">
            <div class="hud-timer" id="timerDisplay">‚è± 2:00</div>
            <div class="hud-count"><span id="compressionCount">0</span> <small>pushes</small></div>
        </div>

        <div class="feedback-text" id="feedbackText">Push down!</div>

        <div class="rhythm-guide" id="rhythmGuide"></div>

        <div class="game-stats">
            <div class="stat-card">
                <div class="stat-label">BPM</div>
                <div class="stat-value" id="bpmValue">--</div>
                <div class="stat-target">Target: 100-120</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">DEPTH</div>
                <div class="depth-bar">
                    <div class="depth-fill" id="depthFill"></div>
                </div>
                <div class="stat-value-sm" id="depthValue">-- cm</div>
                <div class="stat-target">Target: 5-6 cm</div>
            </div>
        </div>

        <div class="tilt-indicator" id="tiltIndicator">‚úÖ Hand angle OK</div>

        <button class="metronome-toggle" id="metronomeBtn">üéµ Metronome: OFF</button>
    </div>

    <!-- ‚îÄ‚îÄ Game Over Screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="screen" id="overScreen">
        <div class="screen-content">
            <h1 class="over-title">üèÅ CPR Complete!</h1>
            <div class="over-grade" id="overGrade">-</div>
            <div class="over-score" id="overScore">Score: 0/100</div>
            <div class="over-survival" id="overSurvival">Survival Probability: --%</div>

            <div class="over-stats" id="overStats"></div>

            <div class="over-tips" id="overTips"></div>

            <button class="retry-btn" onclick="location.reload()">üîÑ Try Again</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="controller.js"></script>
</body>

</html>